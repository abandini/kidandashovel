name = "akidandashovel"
main = "src/index.ts"
compatibility_date = "2024-01-01"
compatibility_flags = ["nodejs_compat"]

# Cron triggers for weather checks
[triggers]
crons = ["0 * * * *"]

# D1 Database
[[d1_databases]]
binding = "DB"
database_name = "akidandashovel-db"
database_id = "placeholder-database-id"

# R2 Storage for photos
[[r2_buckets]]
binding = "PHOTOS"
bucket_name = "akidandashovel-photos"

# KV for sessions
[[kv_namespaces]]
binding = "SESSIONS"
id = "placeholder-sessions-kv-id"

# KV for cache
[[kv_namespaces]]
binding = "CACHE"
id = "placeholder-cache-kv-id"

# Workers AI for image moderation
[ai]
binding = "AI"

# Durable Objects for rate limiting
[[durable_objects.bindings]]
name = "RATE_LIMITER"
class_name = "NotificationRateLimiter"

[[migrations]]
tag = "v1"
new_classes = ["NotificationRateLimiter"]

[vars]
ENVIRONMENT = "development"
APP_URL = "https://akidandashovel.com"
NEO_ZIP_PREFIXES = "440,441,442,443,444"

# Development overrides
[env.development]
vars = { ENVIRONMENT = "development", APP_URL = "http://localhost:8787" }

[env.production]
vars = { ENVIRONMENT = "production", APP_URL = "https://akidandashovel.com" }
